# ============================================================================
# L4 负载均衡器配置文件
# ============================================================================

[global]
# 转发模式: nat (网络地址转换) 或 dr (直接路由)
mode = nat

# 日志级别: debug, info, warn, error
log_level = info

# 会话超时时间 (秒)
session_timeout = 300

# 一致性哈希虚拟节点数
virtual_nodes = 150

# ============================================================================
# VIP (Virtual IP) 配置 - 这是客户端访问的地址
# ============================================================================
[vip]
# 虚拟 IP 地址（你的 F-Stack 机器 IP）
ip = 192.168.72.160

# 监听端口
ports = 80,8080

# 本机 MAC 地址（从 F-Stack 启动日志获取）
mac = 00:0C:29:3E:38:92

# ============================================================================
# Real Server 配置 - 后端真实服务器
# 格式: ip:port:weight:mac (mac 可以留空，ARP 会自动学习)
# ============================================================================
[realserver]
count = 2

# 后端服务器 1 (MAC 从 Windows ARP 表获取)
server1 = 192.168.72.145:8080:100:00:0c:29:e2:b7:c6

# 后端服务器 2
server2 = 192.168.72.149:8080:100:00:0c:29:bd:b3:a4

# ============================================================================
# 网络配置
# ============================================================================
[network]
gateway = 192.168.72.1
netmask = 255.255.255.0

# ============================================================================
# 健康检查配置
# ============================================================================
[healthcheck]
enabled = false
interval = 5
timeout = 3000
failure_threshold = 3
